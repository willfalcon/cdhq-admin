{"version":3,"file":"bundle.js","sources":["../src/scripts/utils.js","../src/index.js"],"sourcesContent":["var createCookie = function(name, value, days) {\n  var expires;\n  if (days) {\n    var date = new Date();\n    date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);\n    expires = '; expires=' + date.toGMTString();\n  } else {\n    expires = '';\n  }\n  document.cookie = name + '=' + value + expires + '; path=/';\n};\n\nfunction getCookie(c_name) {\n  var c_start;\n  if (document.cookie.length > 0) {\n    c_start = document.cookie.indexOf(c_name + '=');\n    if (c_start != -1) {\n      c_start = c_start + c_name.length + 1;\n      c_end = document.cookie.indexOf(';', c_start);\n      if (c_end == -1) {\n        c_end = document.cookie.length;\n      }\n      return unescape(document.cookie.substring(c_start, c_end));\n    }\n  }\n  return '';\n}\n\nfunction getMeta(metaName) {\n  const metas = document.getElementsByTagName('meta');\n\n  for (let i = 0; i < metas.length; i++) {\n    if (metas[i].getAttribute('name') === metaName) {\n      return metas[i].getAttribute('content');\n    }\n  }\n\n  return '';\n}\n\nexport { createCookie, getCookie, getMeta };","import { createCookie, getCookie, getMeta } from './scripts/utils.js';\n\nasync function initAlert() {\n  const root = getMeta('cdhq-site-root');\n  const optionsRes = await fetch(`${root}/wp-json/acf/v3/options/options`);\n  const options = await optionsRes.json();\n  console.log(options);\n  const { acf: { activate_alert, alert_button, alert_delay, alert_text, cookie_id, alert_color } } = options;\n  const button = alert_button ? `\n    <a class=\"cdhq-alert__button\" href=\"${alert_button.url}\" target=\"${alert_button.target}\">\n      ${alert_button.title}\n    </a>\n  ` : ``;\n  const close = `\n    <button class=\"cdhq-alert__close\" id=\"closeAlert\" aria-label=\"Close alert\">\n      <span></span>\n      <span></span>\n    </button>\n  `;\n  const alert = `\n    <div class=\"cdhq-alert\"${alert_color ? `style=\"background: ${alert_color};\"` : ``}>\n      <div class=\"cdhq-alert__text\">\n        ${alert_text}\n      </div>\n      ${button} \n      ${close}\n    </div>\n  `;\n  if (activate_alert && !getCookie(cookie_id)) {\n    setTimeout(() => {\n      document.body.insertAdjacentHTML('afterbegin', alert);\n      const alertEl = document.querySelector('.cdhq-alert');\n      setTimeout(() => {\n        alertEl.style.transform = `translateX(-50%) translateY(0%)`;\n      }, 0);\n      attachListeners(alertEl, cookie_id);\n    }, alert_delay * 1000);\n  }\n}\n\nfunction attachListeners(alert, id) {\n  const closeButton = alert.querySelector('#closeAlert');\n  closeButton.addEventListener('click', () => {\n    alert.addEventListener('transitionend', () => {\n      alert.remove();\n    });\n    alert.style.transform = `translateX(-50%) translateY(-110%)`;\n    createCookie(id, true, 7);\n  });\n}\n\ninitAlert();"],"names":["createCookie","name","value","days","expires","date","Date","setTime","getTime","toGMTString","document","cookie","getCookie","c_name","c_start","length","indexOf","c_end","unescape","substring","getMeta","metaName","metas","getElementsByTagName","i","getAttribute","initAlert","root","optionsRes","fetch","options","json","console","log","acf","activate_alert","alert_button","alert_delay","alert_text","cookie_id","alert_color","button","url","target","title","close","alert","setTimeout","body","insertAdjacentHTML","alertEl","querySelector","style","transform","attachListeners","id","closeButton","addEventListener","remove"],"mappings":"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"}